<html lang="en">

<head>

  <title> Google calender API </title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

  <body class="body">
        <div class="container">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Add Event</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">View</a>
            </li>
          </ul>
          <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
              <div class="row" id="appointment">
                <div class="offset-lg-3 col-lg-6 offset-lg-3 text-center ">
                    <h3 class="heading">Appointment App</h3>
                </div>
                <div class=" offset-lg-3 col-lg-6 offset-lg-3">
                    <form>
                        <div class="form-group">
                          <label for="exampleInputEmail1">Summary</label>
                          <input type="text" class="form-control" id="summary" aria-describedby="emailHelp" placeholder="Enter Summary">
                        </div>    
                        
                          <div class="form-group">
                            <label for="exampleInputEmail1">Description</label>
                            <input type="text" class="form-control" id="description" aria-describedby="emailHelp" placeholder="Enter Description">
                          </div>
                          <div class="form-group">
                            <label for="exampleInputEmail1">Location</label>
                            <input type="text" class="form-control" id="location" aria-describedby="emailHelp" placeholder="Enter Location">
                          </div>
                          <div class="form-group">
                            <label for="exampleInputEmail1">From</label>
                            <input type="date" class="form-control" id="fromdate" aria-describedby="emailHelp">
                          </div>
                          <div class="form-group">
                            <label for="exampleInputEmail1">To</label>
                            <input type="date" class="form-control" id="todate" aria-describedby="emailHelp">
                          </div>
                        
                        <button type="submit" class="btn btn-primary">Submit</button>
                      </form>
                </div>
                </div>
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
              <div class="row" id="appointment">
                <div class="offset-lg-3 col-lg-6 offset-lg-3 text-center ">
                    <h3 class="heading">Appointment List</h3>
                </div>
                <div class=" offset-lg-2 col-lg-8 offset-lg-2">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th scope="col">#</th>
                        <th scope="col">First</th>
                        <th scope="col">Last</th>
                        <th scope="col">Handle</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <th scope="row">1</th>
                        <td>Mark</td>
                        <td>Otto</td>
                        <td>@mdo</td>
                      </tr>
                      <tr>
                        <th scope="row">2</th>
                        <td>Jacob</td>
                        <td>Thornton</td>
                        <td>@fat</td>
                      </tr>
                      <tr>
                        <th scope="row">3</th>
                        <td colspan="2">Larry the Bird</td>
                        <td>@twitter</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                </div>
            </div>
          </div>  
        </div>

  </body>

</html>

<script type="text/javascript">


  $('#msg').hide();
  // $('#appointment').hide();

  $('#eventSubmit').on('click', function (e) {
    e.preventDefault();

    var summary = $('#summary').val();
    var description = $('#description').val();
    var location = $('#location').val();
    var start = $('#start').val();
    var end = $('#end').val();

    if (summary == "" || summary == null || description == "" || description == null || location == "" || location == null || start == null || start == "" || end == "" || end == null) {
      iziToast.warning({
        title: 'Warning',
        message: "Please fill all the fields...!",
        position: 'center',
      });
    } else {
      $.ajax({
        url: '/addEvent',
        method: 'POST',
        data: {
          summary: summary,
          description: description,
          location: location,
          start: start,
          end: end
        },
        headers: {
          Authorization: $`Bearer ${localStorage.getItem("access_token")}`
        },
        error: function (r) { },
        success: function (r) {
          if (r.result) {
            $('#msg').show();
            $('#main_form').hide();
            $("#url_id").html("<a href='" + r.url + "'> Click here to view in google Calender </a>");

          } else {
            $('#msg_error').show();
            $('#main_form').hide();

          }
        }
      });

    }

  });
</script>